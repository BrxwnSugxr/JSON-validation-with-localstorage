<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON validate local storage</title>
    <!-- document script -->
    <script>
      // return true if local storage supported
      // otherwise return false
      function storageSUpported() {
        if (typeof Storage !== "undefined") {
          // local storage is supported
          return true;
        } else {
          // local storage is NOT supported
          return false;
        }
      }

      function validateJson() {
        // get the json text from the textarea
        var jsonTextareaText = document.getElementById("jsonInput").value;

        // save user input into local storage
        if (storageSUpported()) {
          localStorage.setItem("userInput", jsonTextareaText);
        }

        // get message span
        var messageSpan = document.getElementById("messageDisplay");

        // parse the json text
        // try catch displaying msg on span
        try {
          JSON.parse(jsonTextareaText);
          messageSpan.innerHTML =
            "<span style='color:green;'>JSON is valid</span>";
        } catch (ex) {
          var message = "Error: " + ex.message;
          messageSpan.innerHTML =
            "<span style='color:red'>" + message + "</span>";
        }
      }

      // retrieve user input from local storage
      //   and display it in the text area
      function initApp() {
        if (storageSUpported()) {
          //  retrieve previous user input from local storage
          var jsonText = localStorage.getItem("userInput");

          // display previous user input in the textarea
          if (jsonText != null) {
          }
        }
      }
    </script>
  </head>

  <!-- whenever page loads initApp() function will run -->
  <body onLoad="initApp()">
    Enter JSON to validate:<br />
    <!-- textarea -->
    <textarea id="jsonInput" rows="10" cols="50"></textarea>

    <!-- button to validatesSON -->
    <br /><button onclick="validateJson()">Validate JSON</button>
    <!-- display the message -->
    <span id="messageDisplay"></span>
  </body>
</html>
